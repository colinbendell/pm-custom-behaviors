<match:metadata-stage value="client-response">
    <match:variable name="PMUSER_HEADER_NAME" value="?*" value-wildcard="on">
        <edgeservices:modify-outgoing-response.remove-header>
            <name>%(PMUSER_HEADER_NAME)</name>
            <status>on</status>
            <edge-only>off</edge-only>
        </edgeservices:modify-outgoing-response.remove-header>
        <match:variable name="PMUSER_HEADER_VALUE" value="?*" value-wildcard="on">
            <edgeservices:modify-outgoing-response.add-header>
                <name>%(PMUSER_HEADER_NAME)</name>
                <value>%(PMUSER_HEADER_VALUE)</value>
                <status>on</status>
                <edge-only>off</edge-only>
            </edgeservices:modify-outgoing-response.add-header>
        </match:variable>
    </match:variable>
    <match:variable name="PMUSER_HTTP_SET_COOKIE_VALUE" value="?*" value-wildcard="on">
        <edgeservices:modify-outgoing-response.add-header>
            <name>Set-Cookie</name>
            <value>%(PMUSER_HTTP_SET_COOKIE_VALUE)</value>
            <status>on</status>
            <edge-only>off</edge-only>
        </edgeservices:modify-outgoing-response.add-header>
    </match:variable>
    <match:variable name="PMUSER_HTTP_LOCATION" value="?*" value-wildcard="on">
        <edgeservices:modify-outgoing-response.remove-header>
            <name>Location</name>
            <status>on</status>
            <edge-only>off</edge-only>
        </edgeservices:modify-outgoing-response.remove-header>
        <edgeservices:modify-outgoing-response.add-header>
            <name>Location</name>
            <value>%(PMUSER_HTTP_LOCATION)</value>
            <status>on</status>
            <edge-only>off</edge-only>
        </edgeservices:modify-outgoing-response.add-header>
    </match:variable>
    <match:variable name="PMUSER_SURROGATE_LOCATION" value="?*" value-wildcard="on">
        <edgeservices:modify-outgoing-response.remove-header>
            <name>Surrogate-Location</name>
            <status>on</status>
            <edge-only>off</edge-only>
        </edgeservices:modify-outgoing-response.remove-header>
        <edgeservices:modify-outgoing-response.add-header>
            <name>Surrogate-Location</name>
            <value>%(PMUSER_SURROGATE_LOCATION)</value>
            <status>on</status>
            <edge-only>off</edge-only>
        </edgeservices:modify-outgoing-response.add-header>
    </match:variable>
</match:metadata-stage>
